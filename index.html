<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AÅŸkÄ±n Labirenti: Mega Edition â¤ï¸</title>
    <style>
        :root { --p: #ff4d6d; --s: #c9184a; --bg: #fff0f3; }
        * { box-sizing: border-box; font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); overflow: hidden; color: #590d22; }

        /* Arka Plan Kalp Animasyonu */
        .bg-hearts { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; opacity: 0.5; }

        .screen { display: none; height: 100vh; width: 100vw; flex-direction: column; align-items: center; justify-content: center; padding: 20px; text-align: center; }
        .active { display: flex; animation: slideIn 0.5s ease-out; }

        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        .card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); padding: 25px; border-radius: 30px; box-shadow: 0 15px 35px rgba(255, 77, 109, 0.2); width: 100%; max-width: 400px; border: 2px solid #fff; }
        
        button { background: var(--p); color: white; border: none; padding: 15px; border-radius: 15px; font-weight: bold; width: 100%; margin: 10px 0; font-size: 1rem; cursor: pointer; transition: 0.3s; }
        button:active { transform: scale(0.95); background: var(--s); }

        /* HafÄ±za Oyunu Stili */
        .memory-game { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px; }
        .memory-card { height: 70px; background: var(--p); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 30px; color: transparent; cursor: pointer; }
        .memory-card.flipped { color: white; background: white; border: 2px solid var(--p); }

        /* Kelime AvÄ± */
        .word-box { font-size: 24px; letter-spacing: 5px; font-weight: bold; margin: 20px 0; color: var(--s); }

        /* Alt Bilgi */
        .footer { position: fixed; bottom: 20px; font-size: 12px; opacity: 0.6; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>

<div class="bg-hearts" id="bg-hearts"></div>

<div class="screen active" id="sc1">
    <div class="card">
        <h1 style="font-size: 45px;">ğŸŒ¹</h1>
        <h2>HoÅŸ Geldin Sevgilim!</h2>
        <p>BugÃ¼n sadece bir tarih deÄŸil, bizim hikayemiz. HazÄ±rsan bÃ¶lÃ¼mleri geÃ§ ve kalbime ulaÅŸ!</p>
        <button onclick="next(2)">MacerayÄ± BaÅŸlat âœ¨</button>
    </div>
</div>

<div class="screen" id="sc2">
    <div class="card">
        <h3>BÃ¶lÃ¼m 1: Kalp Uyumu ğŸ§©</h3>
        <p>AynÄ± olan emojileri bulup eÅŸleÅŸtir!</p>
        <div class="memory-game" id="game-board"></div>
    </div>
</div>

<div class="screen" id="sc3">
    <div class="card">
        <h3>BÃ¶lÃ¼m 2: Eksik ParÃ§a âœï¸</h3>
        <p>Seni tanÄ±mlayan o kelimeyi tamamla:</p>
        <div class="word-box" id="word">H_Y_T_M</div>
        <p style="font-size: 14px;">(Klavye ile kutuya yaz)</p>
        <input type="text" id="wordInput" style="width: 100%; padding: 10px; border-radius: 10px; border: 2px solid var(--p); text-align: center; text-transform: uppercase;">
        <button onclick="checkWord()">Kelimeyi GÃ¶nder</button>
    </div>
</div>

<div class="screen" id="sc4" style="background: #000; color: #fff;">
    <div id="flashlight" style="position: absolute; width: 150px; height: 150px; background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%); border-radius: 50%; pointer-events: none;"></div>
    <h3>BÃ¶lÃ¼m 3: KaranlÄ±ktaki IÅŸÄ±k ğŸ”¦</h3>
    <p>Kalbimin anahtarÄ± ekranÄ±n bir yerinde saklÄ±. Onu fenerle bul!</p>
    <div id="hiddenKey" onclick="next(5)" style="position: absolute; left: 20%; top: 70%; font-size: 40px; cursor: pointer; filter: brightness(0);">ğŸ”‘</div>
</div>

<div class="screen" id="sc5">
    <div class="card">
        <h2 style="color: var(--p);">TEBRÄ°KLER! ğŸ‰</h2>
        <p>TÃ¼m testleri geÃ§tin. Sen benim hayatÄ±mÄ±n en gÃ¼zel hediyesisin.</p>
        <p id="finalMsg" style="font-weight: bold;"></p>
        <div style="font-size: 50px;">ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ğŸŒ¹ğŸ</div>
        <button onclick="restart()">BaÅŸtan Oyna â¤ï¸</button>
    </div>
</div>

<script>
    // 1. Ekran GeÃ§iÅŸi
    function next(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById('sc' + id).classList.add('active');
        if(id === 2) initMemoryGame();
        if(id === 4) setupFlashlight();
        if(id === 5) typeFinal();
    }

    // 2. HafÄ±za Oyunu
    function initMemoryGame() {
        const icons = ['â¤ï¸', 'ğŸ’–', 'ğŸŒ¹', 'â¤ï¸', 'ğŸ’–', 'ğŸŒ¹'];
        const board = document.getElementById('game-board');
        board.innerHTML = '';
        icons.sort(() => Math.random() - 0.5);
        let flipped = [];
        let matched = 0;

        icons.forEach((icon, index) => {
            const card = document.createElement('div');
            card.classList.add('memory-card');
            card.dataset.icon = icon;
            card.onclick = function() {
                if(flipped.length < 2 && !this.classList.contains('flipped')) {
                    this.classList.add('flipped');
                    this.innerText = icon;
                    flipped.push(this);
                    if(flipped.length === 2) {
                        if(flipped[0].dataset.icon === flipped[1].dataset.icon) {
                            matched++;
                            flipped = [];
                            if(matched === 3) setTimeout(() => next(3), 1000);
                        } else {
                            setTimeout(() => {
                                flipped.forEach(c => { c.classList.remove('flipped'); c.innerText = ''; });
                                flipped = [];
                            }, 800);
                        }
                    }
                }
            };
            board.appendChild(card);
        });
    }

    // 3. Kelime AvÄ±
    function checkWord() {
        const inp = document.getElementById('wordInput').value.toUpperCase();
        if(inp === "HAYATIM") {
            next(4);
        } else {
            alert("YaklaÅŸtÄ±n ama o deÄŸil! â¤ï¸");
        }
    }

    // 4. Fener MekaniÄŸi
    function setupFlashlight() {
        const sc4 = document.getElementById('sc4');
        const fl = document.getElementById('flashlight');
        const key = document.getElementById('hiddenKey');
        
        sc4.onmousemove = (e) => {
            fl.style.left = (e.clientX - 75) + 'px';
            fl.style.top = (e.clientY - 75) + 'px';
            const dist = Math.hypot(e.clientX - (key.offsetLeft + 20), e.clientY - (key.offsetTop + 20));
            key.style.filter = dist < 70 ? "brightness(1)" : "brightness(0)";
        };
        sc4.ontouchmove = (e) => {
            const t = e.touches[0];
            fl.style.left = (t.clientX - 75) + 'px';
            fl.style.top = (t.clientY - 75) + 'px';
            const dist = Math.hypot(t.clientX - (key.offsetLeft + 20), t.clientY - (key.offsetTop + 20));
            key.style.filter = dist < 70 ? "brightness(1)" : "brightness(0)";
        };
    }

    // 5. Final YazÄ±sÄ±
    function typeFinal() {
        const msg = "Seninle her gÃ¼n yeni bir macera... 14 Åubat bizim iÃ§in sadece bir baÅŸlangÄ±Ã§ olsun. Seni Ã§ok seviyorum!";
        let i = 0;
        const el = document.getElementById('finalMsg');
        el.innerText = "";
        const timer = setInterval(() => {
            el.innerText += msg[i];
            i++;
            if(i >= msg.length) clearInterval(timer);
        }, 50);
    }

    function restart() { location.reload(); }
</script>

</body>
</html>
